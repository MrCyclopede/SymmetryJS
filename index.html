
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Symmetry</title>
    <style></style>
</head>

<body style="overflow:hidden; margin:0">

    <canvas id="gameCanvas" style="border:10px;  solid #FFF555; " ></canvas>
    <script>
        // declare variables
        const FPS = 30;
        var canvas, context;

        // load canvas
        canvas = document.getElementById("gameCanvas");
        canvas.width  = window.innerWidth;
        canvas.height = window.innerHeight;
        context = canvas.getContext("2d");

        function get_color(n){
            let i = Math.floor(n / 100);
        var gradient = ["#833AB4", "#AB3081", "#D4264F", "#FD1D1D", "#FC4E2A", "#FC7F37", "#FCB045", "#D3886A", "#AB618F", "#833AB4"]
          return (gradient[i % gradient.length])
        }




        function Point(x, y) {
          this.x = x;
          this.y = y;
        }

          function draw_pixel(p, color){
              context.fillStyle = color;
              context.fillRect( p.x, p.y, 1, 1);
          }



          var sym = 4;
          var angle = (2 * Math.PI) / sym;
          var old = new Array(100);
          var drawn = 0;

          function draw_line(a, b, color){
            context.beginPath()
            context.moveTo(a.x, a.y);
            context.lineTo(b.x, b.y);
            context.strokeStyle = color;
            context.stroke();
          }

          function draw_sym(p){

              drawn++;
              for (let i = 1; i <= sym; i++){

                   let relative  = new Point(p.x - center.x, p.y - center.y);
                   let sym = new Point(relative.x * Math.cos(angle * i) - relative.y * Math.sin(angle * i), relative.y * Math.cos(angle * i) + relative.x * Math.sin(angle * i))

                   let new_point = new Point(sym.x + center.x, sym.y + center.y);
                 //  draw_pixel(new_point, get_color(drawn))
                 if (drawn > 1){
                    draw_line(old[i], new Point(sym.x + center.x, sym.y + center.y), get_color(drawn))
                 }
                   old[i] = new Point(sym.x + center.x, sym.y + center.y);
              }
              console.log(old)
          }


          context.fillStyle = '000000';
          context.fillRect( 0, 0, canvas.width, canvas.height);

          var cur_color = 'red';
          var center = new Point(Math.floor(canvas.width / 2),Math.floor(canvas.height / 2));


          document.addEventListener('mousemove', function(event){
              draw_sym(new Point(event.clientX, event.clientY))
          }, true);

          document.addEventListener('click', function(event){

              context.fillStyle = 'black';
              context.fillRect( 0, 0, canvas.width, canvas.height);
          }, true);

          document.addEventListener('keydown', function(event){
            if (event.keyCode == 38) {
                sym++;
                angle = (2 * Math.PI) / sym;
                old = new Array(100)
                drawn = 0;


            }
            else if (event.keyCode == 40 && tree.depth > 1) {
                sym--;
                angle = (2 * Math.PI) / sym;
                old = new Array(100)
                drawn = 0;
            }

          }, true);



    </script>
</body>

</html>
